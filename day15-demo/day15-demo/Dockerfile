FROM maven:3-eclipse-temurin-21 AS builder

WORKDIR /appserver

COPY .mvn .mvn
COPY src src
COPY pom.xml .
COPY mvnw.cmd .
COPY mvnw .

RUN mvn clean package -Dmaven.test.skip=true

ENV PORT=8080
EXPOSE ${PORT}

# ENV SPRING_DATA_REDIS_HOST=localhost
# ENV SPRING_DATA_REDIS_PORT=6379
# ENV SPRING_DATA_REDIS_USERNAME=NOT_SET
# ENV SPRING_DATA_REDIS_PASSWORD=NOT_SET

#EXPOSE ${SPRING_DATA_REDIS_HOST}
#EXPOSE ${SPRING_DATA_REDIS_PORT}
#EXPOSE ${SPRING_DATA_REDIS_USERNAME}
#EXPOSE ${SPRING_DATA_REDIS_PASSWORD}

#SERVER_PORT=${PORT}

ENTRYPOINT java -jar target/day15-demo-0.0.1-SNAPSHOT.jar